%PDF-1.4
%“Œ‹ž ReportLab Generated PDF document http://www.reportlab.com
1 0 obj
<<
/F1 2 0 R /F2 3 0 R /F3 4 0 R /F4 5 0 R
>>
endobj
2 0 obj
<<
/BaseFont /Helvetica /Encoding /WinAnsiEncoding /Name /F1 /Subtype /Type1 /Type /Font
>>
endobj
3 0 obj
<<
/BaseFont /Helvetica-Bold /Encoding /WinAnsiEncoding /Name /F2 /Subtype /Type1 /Type /Font
>>
endobj
4 0 obj
<<
/BaseFont /Helvetica-Oblique /Encoding /WinAnsiEncoding /Name /F3 /Subtype /Type1 /Type /Font
>>
endobj
5 0 obj
<<
/BaseFont /Courier /Encoding /WinAnsiEncoding /Name /F4 /Subtype /Type1 /Type /Font
>>
endobj
6 0 obj
<<
/Contents 16 0 R /MediaBox [ 0 0 595.2756 841.8898 ] /Parent 15 0 R /Resources <<
/Font 1 0 R /ProcSet [ /PDF /Text /ImageB /ImageC /ImageI ]
>> /Rotate 0 /Trans <<

>> 
  /Type /Page
>>
endobj
7 0 obj
<<
/Contents 17 0 R /MediaBox [ 0 0 595.2756 841.8898 ] /Parent 15 0 R /Resources <<
/Font 1 0 R /ProcSet [ /PDF /Text /ImageB /ImageC /ImageI ]
>> /Rotate 0 /Trans <<

>> 
  /Type /Page
>>
endobj
8 0 obj
<<
/Outlines 10 0 R /PageLabels 18 0 R /PageMode /UseNone /Pages 15 0 R /Type /Catalog
>>
endobj
9 0 obj
<<
/Author () /CreationDate (D:20170714122501+05'00') /Creator (\(unspecified\)) /Keywords () /ModDate (D:20170714122501+05'00') /Producer (ReportLab PDF Library - www.reportlab.com) 
  /Subject (\(unspecified\)) /Title (Fitting PSFs across multiple images simultaneously with fitpsf) /Trapped /False
>>
endobj
10 0 obj
<<
/Count 4 /First 11 0 R /Last 14 0 R /Type /Outlines
>>
endobj
11 0 obj
<<
/Dest [ 6 0 R /XYZ 62.69291 659.0236 0 ] /Next 12 0 R /Parent 10 0 R /Title (Set up)
>>
endobj
12 0 obj
<<
/Dest [ 6 0 R /XYZ 62.69291 548.0236 0 ] /Next 13 0 R /Parent 10 0 R /Prev 11 0 R /Title (New Input Files)
>>
endobj
13 0 obj
<<
/Dest [ 7 0 R /XYZ 62.69291 415.4236 0 ] /Next 14 0 R /Parent 10 0 R /Prev 12 0 R /Title (Running fitpsf)
>>
endobj
14 0 obj
<<
/Dest [ 7 0 R /XYZ 62.69291 340.4236 0 ] /Parent 10 0 R /Prev 13 0 R /Title (Python wrappers)
>>
endobj
15 0 obj
<<
/Count 2 /Kids [ 6 0 R 7 0 R ] /Type /Pages
>>
endobj
16 0 obj
<<
/Length 5163
>>
stream
1 0 0 1 0 0 cm  BT /F1 12 Tf 14.4 TL ET
q
1 0 0 1 62.69291 717.0236 cm
q
BT 1 0 0 1 0 28 Tm 63.22488 0 Td 24 TL /F2 20 Tf 0 0 0 rg (Fitting PSFs across multiple images) Tj T* 52.24 0 Td (simultaneously with ) Tj /F3 20 Tf 0 0 0 rg (fitpsf) Tj T* -115.4649 0 Td ET
Q
Q
q
1 0 0 1 62.69291 671.0236 cm
q
BT 1 0 0 1 0 26 Tm 3.855318 Tw 12 TL /F1 10 Tf 0 0 0 rg (John Krist's ) Tj /F3 10 Tf 0 0 0 rg (fitpsf) Tj /F1 10 Tf 0 0 0 rg ( software has the ability to fit the same stellar source across multiple images) Tj T* 0 Tw .905318 Tw (simultaneously. In this mode, the software allows each PSF a unique x-tilt, y-tilt, background, and focus) Tj T* 0 Tw (value but fits all other terms in common across the images.) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 638.0236 cm
q
BT 1 0 0 1 0 3.5 Tm 21 TL /F2 17.5 Tf 0 0 0 rg (Set up) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 608.0236 cm
q
0 0 0 rg
BT 1 0 0 1 0 14 Tm /F1 10 Tf 12 TL .230542 Tw (The first several steps of the multi-image mode are exactly the same as the usual process for fitting PSFs) Tj T* 0 Tw (in single images:) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 602.0236 cm
Q
q
1 0 0 1 62.69291 602.0236 cm
Q
q
1 0 0 1 62.69291 590.0236 cm
0 0 0 rg
BT /F1 10 Tf 12 TL ET
q
1 0 0 1 6 -3 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL 5.66 0 Td (1.) Tj T* -5.66 0 Td ET
Q
Q
q
1 0 0 1 23 -3 cm
q
BT 1 0 0 1 0 2 Tm 12 TL /F1 10 Tf 0 0 0 rg (Begin by calling the ) Tj /F4 10 Tf 0 0 0 rg (collect) Tj /F1 10 Tf 0 0 0 rg ( command in an IDL session to create the list of input files.) Tj T* ET
Q
Q
q
Q
Q
q
1 0 0 1 62.69291 584.0236 cm
Q
q
1 0 0 1 62.69291 560.0236 cm
0 0 0 rg
BT /F1 10 Tf 12 TL ET
q
1 0 0 1 6 9 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL 5.66 0 Td (2.) Tj T* -5.66 0 Td ET
Q
Q
q
1 0 0 1 23 -3 cm
q
BT 1 0 0 1 0 14 Tm 3.365984 Tw 12 TL /F1 10 Tf 0 0 0 rg (Using ) Tj /F4 10 Tf 0 0 0 rg (wfit) Tj /F1 10 Tf 0 0 0 rg ( \(or your own procedure for detecting a source in each image and defining the) Tj T* 0 Tw (background level and bad pixels\), produce the required ) Tj /F4 10 Tf 0 0 0 rg (.dat) Tj /F1 10 Tf 0 0 0 rg ( and ) Tj /F4 10 Tf 0 0 0 rg (.cos) Tj /F1 10 Tf 0 0 0 rg ( files for each input image.) Tj T* ET
Q
Q
q
Q
Q
q
1 0 0 1 62.69291 560.0236 cm
Q
q
1 0 0 1 62.69291 527.0236 cm
q
BT 1 0 0 1 0 3.5 Tm 21 TL /F2 17.5 Tf 0 0 0 rg (New Input Files) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 485.0236 cm
q
BT 1 0 0 1 0 26 Tm .631654 Tw 12 TL /F1 10 Tf 0 0 0 rg (At this point, we'd normally call ) Tj /F4 10 Tf 0 0 0 rg (mkfocusin) Tj /F1 10 Tf 0 0 0 rg ( to copy over a template ) Tj /F4 10 Tf 0 0 0 rg (.in) Tj /F1 10 Tf 0 0 0 rg ( file for the desired camera and) Tj T* 0 Tw .436179 Tw (chip as well as to define a ) Tj /F4 10 Tf 0 0 0 rg (.pro) Tj /F1 10 Tf 0 0 0 rg ( file with a series of sequential calls to ) Tj /F4 10 Tf 0 0 0 rg (fitpsf) Tj /F1 10 Tf 0 0 0 rg (. We still need these files,) Tj T* 0 Tw (but now they're defined slightly differently.) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 443.0236 cm
q
BT 1 0 0 1 0 26 Tm 1.791098 Tw 12 TL /F1 10 Tf 0 0 0 rg (The ) Tj /F4 10 Tf 0 0 0 rg (.in) Tj /F1 10 Tf 0 0 0 rg ( file gains new tip, tilt, background, and focus entries for each of the input images \(all other) Tj T* 0 Tw .641984 Tw (parameters are shared across images\). For example, to run ) Tj /F4 10 Tf 0 0 0 rg (fitpsf) Tj /F1 10 Tf 0 0 0 rg ( on 4 WFC3UVIS1 images, the ) Tj /F4 10 Tf 0 0 0 rg (.in) Tj /F1 10 Tf 0 0 0 rg  T* 0 Tw (file should take the form:) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 85.82362 cm
q
q
1 0 0 1 0 0 cm
q
1 0 0 1 6.6 6.6 cm
q
.662745 .662745 .662745 RG
.5 w
.960784 .960784 .862745 rg
n -6 -6 468.6898 348 re B*
Q
q
0 0 0 rg
BT 1 0 0 1 0 326 Tm /F4 10 Tf 12 TL (      Array dimensions      512) Tj T* (            Wavelength   0.4107) Tj T* (        Fitting method        1) Tj T* (  Merit function power  2.00000) Tj T* (    Merit wing damping  0.00500) Tj T* (           Camera mode    WFC3UVIS1) Tj T* (          Zernike type OBSCURED) Tj T* (Y    1st file from parax focus \(um\)       0.0000) Tj T* (Y File  2 dFocus from 1st file \(um\)       0.0000) Tj T* (Y File  3 dFocus from 1st file \(um\)       0.0000) Tj T* (Y File  4 dFocus from 1st file \(um\)       0.0000) Tj T* (Y                  X-coma \(microns\)       0.0000) Tj T* (Y                  Y-coma \(microns\)       0.0000) Tj T* (Y           X-astigmatism \(microns\)       0.0000) Tj T* (Y           Y-astigmatism \(microns\)       0.0000) Tj T* (Y               Spherical \(microns\)      -0.0110) Tj T* (N                X-clover \(microns\)       0.0035) Tj T* (N                Y-clover \(microns\)      -0.0065) Tj T* (I X-spherical astigmatism \(microns\)       0.0000) Tj T* (I Y-spherical astigmatism \(microns\)       0.0000) Tj T* (N               X-ashtray \(microns\)       0.0045) Tj T* (N               Y-Ashtray \(microns\)      -0.0065) Tj T* (I   Fifth order spherical \(microns\)       0.0000) Tj T* (Y            Star  1 Background*1e4       0.0000) Tj T* (Y            Star  2 Background*1e4       0.0000) Tj T* (Y            Star  3 Background*1e4       0.0000) Tj T* (Y            Star  4 Background*1e4       0.0000) Tj T* (Y          Star  1 X-tilt \(microns\)       0.0000) Tj T* ET
Q
Q
Q
Q
Q
 
endstream
endobj
17 0 obj
<<
/Length 3790
>>
stream
1 0 0 1 0 0 cm  BT /F1 12 Tf 14.4 TL ET
q
1 0 0 1 62.69291 655.8236 cm
q
q
1 0 0 1 0 0 cm
q
1 0 0 1 6.6 6.6 cm
q
.662745 .662745 .662745 RG
.5 w
.960784 .960784 .862745 rg
n -6 -6 468.6898 108 re B*
Q
q
0 0 0 rg
BT 1 0 0 1 0 86 Tm /F4 10 Tf 12 TL (Y          Star  1 Y-tilt \(microns\)       0.0000) Tj T* (Y          Star  2 X-tilt \(microns\)       0.0000) Tj T* (Y          Star  2 Y-tilt \(microns\)       0.0000) Tj T* (Y          Star  3 X-tilt \(microns\)       0.0000) Tj T* (Y          Star  3 Y-tilt \(microns\)       0.0000) Tj T* (Y          Star  4 X-tilt \(microns\)       0.0000) Tj T* (Y          Star  4 Y-tilt \(microns\)       0.0000) Tj T* (Y                              Blur       0.4500) Tj T* ET
Q
Q
Q
Q
Q
q
1 0 0 1 62.69291 611.8236 cm
q
0 0 0 rg
BT 1 0 0 1 0 26 Tm /F1 10 Tf 12 TL .75332 Tw (Note that the focus terms are now defined in terms of physical despace at the secondary \(rather than in) Tj T* 0 Tw .071567 Tw (terms of RMS wavefront error at the camera\), and the focus values after the first file are defined relative to) Tj T* 0 Tw (the first file.) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 593.8236 cm
q
BT 1 0 0 1 0 2 Tm 12 TL /F1 10 Tf 0 0 0 rg (And the ) Tj /F4 10 Tf 0 0 0 rg (.pro) Tj /F1 10 Tf 0 0 0 rg ( file becomes a single call to fitpsf:) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 560.6236 cm
q
q
1 0 0 1 0 0 cm
q
1 0 0 1 6.6 6.6 cm
q
.662745 .662745 .662745 RG
.5 w
.960784 .960784 .862745 rg
n -6 -6 468.6898 24 re B*
Q
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F4 10 Tf 12 TL (fitpsf, '@image_list',0,1,/EE) Tj T* ET
Q
Q
Q
Q
Q
q
1 0 0 1 62.69291 528.6236 cm
q
BT 1 0 0 1 0 14 Tm .472927 Tw 12 TL /F1 10 Tf 0 0 0 rg (where the ) Tj /F4 10 Tf 0 0 0 rg (image_list) Tj /F1 10 Tf 0 0 0 rg ( file is a new input containing each image file per line \(without the file extension\).) Tj T* 0 Tw (For example:) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 459.4236 cm
q
q
1 0 0 1 0 0 cm
q
1 0 0 1 6.6 6.6 cm
q
.662745 .662745 .662745 RG
.5 w
.960784 .960784 .862745 rg
n -6 -6 468.6898 60 re B*
Q
q
0 0 0 rg
BT 1 0 0 1 0 38 Tm /F4 10 Tf 12 TL (ict8p2ikq_flt) Tj T* (ict8p2iuq_flt) Tj T* (ict8p2j4q_flt) Tj T* (ict8p2jfq_flt) Tj T* ET
Q
Q
Q
Q
Q
q
1 0 0 1 62.69291 427.4236 cm
q
BT 1 0 0 1 0 14 Tm .618876 Tw 12 TL /F1 10 Tf 0 0 0 rg (Since ) Tj /F4 10 Tf 0 0 0 rg (image_list) Tj /F1 10 Tf 0 0 0 rg ( is now the primary input to fitpsf, the ) Tj /F4 10 Tf 0 0 0 rg (.in) Tj /F1 10 Tf 0 0 0 rg ( file we defined above should be named to) Tj T* 0 Tw (match: ) Tj /F4 10 Tf 0 0 0 rg (image_list.in) Tj /F1 10 Tf 0 0 0 rg (.) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 394.4236 cm
q
BT 1 0 0 1 0 3.5 Tm 21 TL /F2 17.5 Tf 0 0 0 rg (Running ) Tj /F3 17.5 Tf 0 0 0 rg (fitpsf) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 352.4236 cm
q
BT 1 0 0 1 0 26 Tm 1.270697 Tw 12 TL /F3 10 Tf 0 0 0 rg (fitpsf) Tj /F1 10 Tf 0 0 0 rg ( can now be called in IDL with ) Tj /F4 10 Tf 0 0 0 rg (@do_image_list.pro) Tj /F1 10 Tf 0 0 0 rg (. This will write out ) Tj /F4 10 Tf 0 0 0 rg (image_list.sum) Tj /F1 10 Tf 0 0 0 rg ( and) Tj T* 0 Tw 1.195984 Tw /F4 10 Tf 0 0 0 rg (image_list.par) Tj /F1 10 Tf 0 0 0 rg ( files, which are identical to the single-image outputs, with the addition of a few new) Tj T* 0 Tw (lines. These files can be parsed with a modified version of ) Tj /F4 10 Tf 0 0 0 rg (focusresults.pro) Tj /F1 10 Tf 0 0 0 rg (.) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 319.4236 cm
q
BT 1 0 0 1 0 3.5 Tm 21 TL /F2 17.5 Tf 0 0 0 rg (Python wrappers) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 277.4236 cm
q
0 0 0 rg
BT 1 0 0 1 0 26 Tm /F1 10 Tf 12 TL 2.035318 Tw (I've written Python code to automate defining the multi-image inputs and parsing the outputs. It also) Tj T* 0 Tw 1.276651 Tw (generalizes to the single-image case, so a single wrapper suffices for both modes. This functionality is) Tj T* 0 Tw (documented in TBD.) Tj T* ET
Q
Q
 
endstream
endobj
18 0 obj
<<
/Nums [ 0 19 0 R 1 20 0 R ]
>>
endobj
19 0 obj
<<
/S /D /St 1
>>
endobj
20 0 obj
<<
/S /D /St 2
>>
endobj
xref
0 21
0000000000 65535 f 
0000000073 00000 n 
0000000134 00000 n 
0000000241 00000 n 
0000000353 00000 n 
0000000468 00000 n 
0000000573 00000 n 
0000000778 00000 n 
0000000983 00000 n 
0000001088 00000 n 
0000001407 00000 n 
0000001481 00000 n 
0000001588 00000 n 
0000001717 00000 n 
0000001845 00000 n 
0000001961 00000 n 
0000002027 00000 n 
0000007242 00000 n 
0000011084 00000 n 
0000011134 00000 n 
0000011168 00000 n 
trailer
<<
/ID 
[<627866f937fecc3e8263d01b3b2406eb><627866f937fecc3e8263d01b3b2406eb>]
% ReportLab generated PDF document -- digest (http://www.reportlab.com)

/Info 9 0 R
/Root 8 0 R
/Size 21
>>
startxref
11202
%%EOF
